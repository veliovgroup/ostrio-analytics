window.OstrioTrackerClass=window.OTC=(function(){function a(a,b){var c=this;if(this.sid=a,this.version=220,this.sending=!1,this.loc=location||window.location||document.location,this.current="",this.auto=!1!==b,this._euc=encodeURIComponent||function(a){return a},this.warn=console.warn.bind(console)||console.log.bind(console)||function(){},this.errs=[],this.onTrackArr=[],this.onEventArr=[],this.auto){var d=function(){c.track()};this.on(window,"hashchange",d),this.on(window,"popstate",d),setInterval(function(){c.current===c.loc.href||c.sending||d()},500);var e=window.onerror;window.onerror=function(a,b,d,f){var g=b||"";!~g.indexOf(c.loc.origin)||c.pushEvent("[Global Error]","Error: "+(a||"N/A")+". File: "+g.replace(c.loc.origin,"")+" at "+c.loc.href+":"+(d||"0")+":"+(f||"0")),e&&e.apply(this,arguments)},d()}}return a.prototype.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},a.prototype.onPushEvent=function(a){a&&"function"==typeof a&&this.onEventArr.push(a)},a.prototype.onTrack=function(a){a&&"function"==typeof a&&this.onTrackArr.push(a)},a.prototype.pushEvent=function(a,b){for(var c=this.onEventArr.length-1;0<=c;c--)this.onEventArr[c](a,b);if(a&&b&&""+a.length&&""+b.length){var d=""+a,e=""+b,f={};if("[Global Error]"==d){if(e=e.trim().substring(0,512),!!~this.errs.indexOf(e))return;this.errs.push(e)}else e=e.trim().substring(0,64);f[d.trim().substring(0,24)]=e,this.track("?3="+this._euc(JSON.stringify(f)))}else this.warn("[ostrio] [pushEvent]: Can't add event without key or value!")},a.prototype.track=function(a){var b=a||"";if(!~b.indexOf("?3="))for(var c=this.onTrackArr.length-1;0<=c;c--)this.onTrackArr[c]();if(!this.sending&&this.current!==this.loc.href||!!~b.indexOf("?3=")){this.sending=!0;var d=this;setTimeout(function(){d.current=d.loc.href,~b.indexOf("?3=")||(b="?6="+d._euc(d.loc.href.trim().substring(0,1024))+b,b+="&2="+d._euc(document.title.trim().substring(0,512)),document.referrer&&!~document.referrer.indexOf(d.loc.origin)&&(b+="&1="+d._euc(document.referrer.trim().substring(0,1024))));var a,c="https://analytics.ostr.io/"+d.sid+".gif"+b+"&9="+(""+Date.now()).substr(-7)+"&v="+d.version;a=window.Image?new Image:document.createElement("img"),a.onload=function(){a=null},a.src=c,d.sending=!1},64)}},a})();